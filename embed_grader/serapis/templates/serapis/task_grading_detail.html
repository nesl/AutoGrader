{% extends 'serapis/base_sidebar.html' %}
{% load staticfiles %}
{% load guardian_tags %}

{% block sidebar-content %}
    <!-- SIDEBAR USER TITLE -->
    <div class="profile-usertitle">
        <div class="profile-usertitle-name">
            Submission
        </div>
        <div class="profile-usertitle-job">
            {{ assignment.name }}
        </div>
    </div>
    <!-- END SIDEBAR USER TITLE -->
    <!-- SIDEBAR MENU -->
    <div class="profile-usermenu">
        <ul class="nav nav-bar">
            <li>
                <a href="{% url 'homepage' %}">Courses</a>
            </li>
            <li class="active">
                <a href="{% url 'submissions_full_log' %}">Submissions</a>
            </li>
            {% get_obj_perms request.user for course as "course_perms" %}
            {% if "view_membership" in course_perms %}
            <li>
                <a href="{% url 'membership' course.id %}">Students</a>
            </li>
            {% endif %}
            {% if perms.serapis.view_hardware_type %}
            <li>
                <a href="{% url 'testbed-type-list' %}">Testbed Types</a>
            </li>
            <li>
                <a href="{% url 'hardware-type-list' %}">Hardware Types</a>
            </li>
            {% endif %}
        </ul>
    </div>
    <!-- END MENU -->
{% endblock %}

{% block main-content %}
    <div class="main-content">
        <div class="top-buffer">
          <ol class="breadcrumb">
              <li><a href="{% url 'homepage' %}">Courses</a></li>
              <li><a href="{% url 'course' course.id %}">{{ course.course_code }}</a></li>
              <li><a href="{% url 'assignment' assignment.id %}">{{ assignment.name }}</a></li>
              <li><a href="{% url 'submission' submission.id %}">Submission</a></li>
              <li>Task <a>{{ grading_detail.assignment_task_id.brief_description }}</a> grading detail</li>
          </ol>
        </div>

        <h3 class="page-header"><a href="{% url 'assignment' assignment.id %}">{{ assignment.name }}</a>:
          <a>{{ grading_detail.assignment_task_id.brief_description }}</a> Grading Detail</h3>

        <h5>Student: {{ author.first_name }} {{ author.last_name}}</h5>
        <h5>Submission: <a href="{% url 'submission' submission.id %}">{{ submission.submission_time }}</a></h5>
        {% if grading.points == assignment_task.points %}
          <h5>Score: <span class="badge" style="background:green; width:80px;">{{ grading.points }} / {{ assignment_task.points }}</span></h5>
        {% else %}
          <h5>Score: <span class="badge" style="background:darkred; width:80px;">{{ grading.points }} / {{ assignment_task.points }}</span></h5>
        {% endif %}
        {% if grading.DUT_serial_output %}
        <a href="{{ MEDIA_URL }}{{ grading.DUT_serial_output.url }}" class="btn btn-primary"
          style="font-size: 12px;background:white; color:SteelBlue; border-color:SteelBlue; width:150px">
          <span class="glyphicon glyphicon-download-alt"></span> &nbsp;DUT Serial Output
        </a>
        {% endif %}
        <hr>
        {% if grading.grading_detail %}
          <h5>Feedback<h5>
          <br>
          <p style="white-space:pre; font-size:13px">{{feedback}}</p>
          <hr>
        {% endif %}

        {% if grading.output_file %}
          <h5>Output File: &nbsp; <a href="{{ MEDIA_URL }}{{ grading.output_file.url }}" class="btn btn-primary"
            style="font-size: 12px;background:white; color:SteelBlue; border-color:SteelBlue;">
            <span class="glyphicon glyphicon-download-alt"></span> &nbsp;Download
          </a></h5>
          <h3>[reserved for waveform]</h3>
          <hr>
        {% endif %}
    </div>
{% endblock %}
