{% extends 'serapis/base_sidebar.html' %}
{% load staticfiles %}

{% block profile-usertitle-name %}
  Testbed
{% endblock %}

{% block profile-usertitle-job %}
  <br/>
{% endblock %}

{% block testbed-status-list-active %}active{% endblock %}

{% block main-content %}
  <div class="main-content">
    <h1 class="page-header">Testbed Status List</h1>

    {% if not testbed_list %}
      <p>No testbeds available to view.</p>
    {% else %}
      <div class="table-responsive">
        <table class="table table-hover">
          <tr>
            <th>Testbed ID</th>
            <th>IP Address &nbsp; Port</th>
            <th>Current Status</th>
            <th>Last Report Time</th>
            <th>Last Report Status</th>
            <th>Graded task</th>
          </tr>
          {% for testbed in testbed_list %}
          <tr>
            <td>{{ testbed.id }}</td>
            <td>{{ testbed.ip_address }}</td>
            <td>{{ testbed.get_status_display }}</td>
            <td>{{ testbed.report_time }}</td>
            <td>{{ testbed.get_report_status_display }}</td>
            <td>
              {% if not testbed.task_being_graded %}
                (No executing task)
              {% else %}
                Course: {{ testbed.task_being_graded.assignment_task_fk.assignment_fk.course_fk.name }}<br/>
                Assignment: {{ testbed.task_being_graded.assignment_task_fk.assignment_fk.name }}<br/>
                Task name: {{ testbed.task_being_graded.assignment_task_fk }}<br/>
                Submission ID: {{ testbed.task_being_graded.submission_fk.id }}
              {% endif %}
            </td>
          </tr>
        {% endfor %}
      </table>
      </div>
    {% endif %}


  </div>

{% endblock %}
